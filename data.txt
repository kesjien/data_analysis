мы берем не просто среднее, а по формуле:
(среднее значение * размер категории + глобальное среднее значение * C) / (размер категории + С)
 


[8:30] 
где С - коэффициент регуляризации, можно брать в пределах от 10 до 50


[8:31] 
Я всё делал у себя на холдауте, видел большие приросты. И ровно такие же оказывались на ЛБ


[8:33] 
Да, кстати, все признаки, связанные с таргетом строились ооф

1. Просто сами признаки
2. Среднее значение таргета с регуляризацией, группированное по всем категориальным признакам
3. Среднее значение таргета с регуляризацией, группированное по паре v22 - все категориальные признаки
3. Среднее значение таргета с регуляризацией, группированное по паре v56 - все категориальные признаки
4. Среднее значение таргета с регуляризацией, группированное по паре v113 - все категориальные признаки
5. Ванхот энкодинг категориальных признаков с небольшим количеством групп с отсечением
6. Относительное вхождение категориальных признаков с небольшим количеством групп с отсечением нормированное на группы v22
7. Статистики (минимальное, максимальное, среднее) по признаку v50 группированное по всем категориальным признакам
8. Статистики (минимальное, максимальное, среднее) по признаку v50 группированное по паре всех категориальных признаков
9. Статистики (минимальное, максимальное, среднее) по признаку v50 группированное по тройке всех категориальных признаков
10. Статистики (минимальное, максимальное, среднее) по признаку v50 группированное по паре всех числовых признаков без пропусков
11. Логистическая регрессия по таргету с нормализацией по всем числовым признакам без пропусков
12. Логистическая регрессия по таргету с нормализацией по всем числовым признакам без пропусков внутри групп всех категориальных признаков



создаем новые колонки в которые записываем data['v22'] + '_' + data[cat_col] и группируем по этим колонкам


кстати, еще вопрос
А что за относительно вхождение?
> 6. Относительное вхождение категориальных признаков с небольшим количеством групп с отсечением нормированное на группы v22

пусть у нас есть
v22 cat_col
i a
i a
i b
i c
j a
j b
k b
мы создаем не просто ван-хот по cat_col (a, b, c)
а считаем для каждой категории v22 как часто встречаются те или значения cat_col
получится такая матрица с признаками:
v22 p_a p_b p_c
i 0.5 0.25 0.25
i 0.5 0.25 0.25
i 0.5 0.25 0.25
i 0.5 0.25 0.25
j 0.5 0.5 0.0
k 0.0 1.0 0.0
